import{H as b,d as K,r as c,c as $,C as Q,e as d,K as W,o as y,f as h,g as t,w as r,y as x,p as z,h as n,L as O,k as T,i as V,M as X,N as Y,A as k,I as _,_ as Z}from"./index-333c0485.js";const ee=(m,i)=>b.get(`/admin/product/baseTrademark/${m}/${i}`),ae=m=>m.id?b.put("/admin/product/baseTrademark/update",m):b.post("/admin/product/baseTrademark/save",m),te=m=>b.delete("/admin/product/baseTrademark/remove/"+m),le=["src"],oe={class:"demo-pagination-block"},re=["src"],ne={class:"dialog-footer"},se=K({__name:"index",setup(m){let i=c(1),g=c(5),C=c(0),U=c([]),u=c(!1),o=$({tmName:"",logoUrl:""}),p=c();const f=async(a=1)=>{i.value=a;let e=await ee(i.value,g.value);e.code===200&&(C.value=e.data.total,U.value=e.data.records)},G={tmName:[{required:!0,trigger:"blur",validator:(a,e,s)=>{console.log(4445555),e.trim().length>=2?s():s(new Error("品牌名称至少2个字符！"))}}],logoUrl:[{required:!0,validator:(a,e,s)=>{e?s():s(new Error("请上传品牌LOGO!"))}}]},L=a=>a.type=="image/png"||a.type=="image/jpeg"||a.type=="image/gif"?a.size/1024/1024<4?!0:(_({type:"error",message:"上传文件大小小于4M"}),!1):(_({type:"error",message:"上传文件格式务必PNG|JPG|GIF"}),!1),q=(a,e)=>{o.logoUrl=a.data,p.value.clearValidate("logoUrl")},A=()=>{var a,e;u.value=!0,o.id=0,o.tmName="",o.logoUrl="",(a=p.value)==null||a.clearValidate("tmName"),(e=p.value)==null||e.clearValidate("logoUrl")},P=async()=>{await p.value.validate();let a=await ae(o);console.log(a,1112),u.value=!1,a.code===200?_({type:"success",message:o.id?"修改成功！":"添加成功！"}):_({type:"error",message:o.id?"修改失败！":"添加失败！"}),f()},B=a=>{var e,s;(e=p.value)==null||e.clearValidate("tmName"),(s=p.value)==null||s.clearValidate("logoUrl"),u.value=!0,o.tmName=a.tmName,o.logoUrl=a.logoUrl,o.id=a.id},D=async a=>{(await te(a)).code===200?(_({type:"success",message:"删除成功！"}),f(U.value.length>1?i.value:i.value-1)):_({type:"error",message:"删除失败！"})};return Q(()=>{f()}),(a,e)=>{const s=d("el-button"),v=d("el-table-column"),E=d("el-popconfirm"),M=d("el-table"),H=d("el-pagination"),I=d("el-card"),R=d("el-input"),w=d("el-form-item"),S=d("el-icon"),j=d("el-upload"),F=d("el-form"),J=d("el-dialog"),N=W("has");return y(),h("div",null,[t(I,null,{default:r(()=>[x((y(),z(s,{type:"primary",icon:n(O),onClick:A},{default:r(()=>e[5]||(e[5]=[T(" 添加品牌 ")])),_:1,__:[5]},8,["icon"])),[[N,"btn.Trademark.add"]]),t(M,{stripe:"",style:{width:"100%",margin:"10px 0"},border:"",data:n(U)},{default:r(()=>[t(v,{label:"序号",width:"60px",align:"center",type:"index"}),t(v,{label:"品牌名称",width:"180",align:"center",prop:"tmName"}),t(v,{label:"品牌LOGO",align:"center"},{default:r(({row:l})=>[V("img",{src:l.logoUrl,style:{width:"80px",height:"80px"}},null,8,le)]),_:1}),t(v,{label:"品牌操作",align:"center"},{default:r(({row:l})=>[x(t(s,{type:"primary",icon:n(X),onClick:()=>B(l)},null,8,["icon","onClick"]),[[N,"btn.Trademark.update"]]),t(E,{title:`确定删除${l.tmName} 吗？`,icon:"Delete",width:"250px",onConfirm:()=>D(l.id)},{reference:r(()=>[x(t(s,{type:"danger",icon:n(Y)},null,8,["icon"]),[[N,"btn.Trademark.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),V("div",oe,[t(H,{"current-page":n(i),"onUpdate:currentPage":e[0]||(e[0]=l=>k(i)?i.value=l:i=l),"page-size":n(g),"onUpdate:pageSize":e[1]||(e[1]=l=>k(g)?g.value=l:g=l),"page-sizes":[3,5,7,10],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:n(C),onChange:f},null,8,["current-page","page-size","total"])])]),_:1}),t(J,{modelValue:n(u),"onUpdate:modelValue":e[4]||(e[4]=l=>k(u)?u.value=l:u=l),title:n(o).id?"修改品牌":"添加品牌",width:"500"},{footer:r(()=>[V("div",ne,[t(s,{onClick:e[3]||(e[3]=l=>k(u)?u.value=!1:u=!1)},{default:r(()=>e[6]||(e[6]=[T("取消")])),_:1,__:[6]}),t(s,{type:"primary",onClick:P},{default:r(()=>e[7]||(e[7]=[T("确认")])),_:1,__:[7]})])]),default:r(()=>[t(F,{model:n(o),rules:G,ref_key:"ruleFormRef",ref:p},{default:r(()=>[t(w,{label:"品牌名称：",style:{width:"80%"},prop:"tmName"},{default:r(()=>[t(R,{placeholder:"请输入品牌名称",modelValue:n(o).tmName,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).tmName=l)},null,8,["modelValue"])]),_:1}),t(w,{label:"上传LOGO:",prop:"logoUrl"},{default:r(()=>[t(j,{class:"avatar-uploader",action:"/api/admin/product/fileUpload","show-file-list":!0,"on-success":q,"before-upload":L},{default:r(()=>[n(o).logoUrl?(y(),h("img",{key:0,src:n(o).logoUrl,class:"avatar"},null,8,re)):(y(),z(S,{key:1,class:"avatar-uploader-icon"},{default:r(()=>[t(n(O))]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const me=Z(se,[["__scopeId","data-v-d8a211d0"]]);export{me as default};
